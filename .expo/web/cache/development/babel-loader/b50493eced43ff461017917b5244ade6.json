{"ast":null,"code":"var _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.deleteApp = deleteApp;\nexports.getApp = getApp;\nexports.getApps = getApps;\nexports.initializeApp = initializeApp;\nexports.initializeNativeApps = initializeNativeApps;\nexports.setLogLevel = setLogLevel;\nexports.setOnAppCreate = setOnAppCreate;\nexports.setOnAppDestroy = setOnAppDestroy;\n\nvar _common = require(\"@react-native-firebase/app/lib/common\");\n\nvar _FirebaseApp = _interopRequireDefault(require(\"../../FirebaseApp\"));\n\nvar _constants = require(\"../constants\");\n\nvar _nativeModule = require(\"./nativeModule\");\n\nvar APP_REGISTRY = {};\nvar onAppCreateFn = null;\nvar onAppDestroyFn = null;\nvar initializedNativeApps = false;\n\nfunction setOnAppCreate(fn) {\n  onAppCreateFn = fn;\n}\n\nfunction setOnAppDestroy(fn) {\n  onAppDestroyFn = fn;\n}\n\nfunction initializeNativeApps() {\n  var nativeModule = (0, _nativeModule.getAppModule)();\n  var NATIVE_FIREBASE_APPS = nativeModule.NATIVE_FIREBASE_APPS;\n\n  if (NATIVE_FIREBASE_APPS && NATIVE_FIREBASE_APPS.length) {\n    for (var i = 0; i < NATIVE_FIREBASE_APPS.length; i++) {\n      var _NATIVE_FIREBASE_APPS = NATIVE_FIREBASE_APPS[i],\n          appConfig = _NATIVE_FIREBASE_APPS.appConfig,\n          options = _NATIVE_FIREBASE_APPS.options;\n      var name = appConfig.name;\n      APP_REGISTRY[name] = new _FirebaseApp.default(options, appConfig, true, deleteApp.bind(null, name, true));\n      onAppCreateFn(APP_REGISTRY[name]);\n    }\n  }\n\n  initializedNativeApps = true;\n}\n\nfunction getApp() {\n  var name = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : _constants.DEFAULT_APP_NAME;\n\n  if (!initializedNativeApps) {\n    initializeNativeApps();\n  }\n\n  var app = APP_REGISTRY[name];\n\n  if (!app) {\n    throw new Error(\"No Firebase App '\" + name + \"' has been created - call firebase.initializeApp()\");\n  }\n\n  return app;\n}\n\nfunction getApps() {\n  if (!initializedNativeApps) {\n    initializeNativeApps();\n  }\n\n  return Object.values(APP_REGISTRY);\n}\n\nfunction initializeApp() {\n  var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var configOrName = arguments.length > 1 ? arguments[1] : undefined;\n  var appConfig = configOrName;\n\n  if (!(0, _common.isObject)(configOrName) || (0, _common.isNull)(configOrName)) {\n    appConfig = {\n      name: configOrName,\n      automaticResourceManagement: false,\n      automaticDataCollectionEnabled: true\n    };\n  }\n\n  if ((0, _common.isUndefined)(appConfig.name)) {\n    appConfig.name = _constants.DEFAULT_APP_NAME;\n  }\n\n  var _appConfig = appConfig,\n      name = _appConfig.name;\n\n  if (!name || !(0, _common.isString)(name)) {\n    return Promise.reject(new Error(\"Illegal App name: '\" + name + \"'\"));\n  }\n\n  if (APP_REGISTRY[name]) {\n    return Promise.reject(new Error(\"Firebase App named '\" + name + \"' already exists\"));\n  }\n\n  if (!(0, _common.isObject)(options)) {\n    return Promise.reject(new Error(\"firebase.initializeApp(options, <- expects an Object but got '\" + typeof options + \"'\"));\n  }\n\n  if (!(0, _common.isString)(options.apiKey)) {\n    return Promise.reject(new Error(\"Missing or invalid FirebaseOptions property 'apiKey'.\"));\n  }\n\n  if (!(0, _common.isString)(options.appId)) {\n    return Promise.reject(new Error(\"Missing or invalid FirebaseOptions property 'appId'.\"));\n  }\n\n  if (!(0, _common.isString)(options.databaseURL)) {\n    return Promise.reject(new Error(\"Missing or invalid FirebaseOptions property 'databaseURL'.\"));\n  }\n\n  if (!(0, _common.isString)(options.messagingSenderId)) {\n    return Promise.reject(new Error(\"Missing or invalid FirebaseOptions property 'messagingSenderId'.\"));\n  }\n\n  if (!(0, _common.isString)(options.projectId)) {\n    return Promise.reject(new Error(\"Missing or invalid FirebaseOptions property 'projectId'.\"));\n  }\n\n  if (!(0, _common.isString)(options.storageBucket)) {\n    return Promise.reject(new Error(\"Missing or invalid FirebaseOptions property 'storageBucket'.\"));\n  }\n\n  var app = new _FirebaseApp.default(options, {\n    name: name\n  }, false, deleteApp.bind(null, name, true));\n  APP_REGISTRY[name] = app;\n  onAppCreateFn(APP_REGISTRY[name]);\n  return (0, _nativeModule.getAppModule)().initializeApp(options, {\n    name: name\n  }).then(function () {\n    app._initialized = true;\n    return app;\n  }).catch(function (e) {\n    delete APP_REGISTRY[name];\n    throw e;\n  });\n}\n\nfunction setLogLevel(logLevel) {\n  if (!['error', 'warn', 'info', 'debug', 'verbose'].includes(logLevel)) {\n    throw new Error('LogLevel must be one of \"error\", \"warn\", \"info\", \"debug\", \"verbose\"');\n  }\n\n  if (_common.isIOS) {\n    (0, _nativeModule.getAppModule)().setLogLevel(logLevel);\n  }\n}\n\nfunction deleteApp(name, nativeInitialized) {\n  if (name === _constants.DEFAULT_APP_NAME && nativeInitialized) {\n    return Promise.reject(new Error('Unable to delete the default native firebase app instance.'));\n  }\n\n  var app = APP_REGISTRY[name];\n  var nativeModule = (0, _nativeModule.getAppModule)();\n  return nativeModule.deleteApp(name).then(function () {\n    app._deleted = true;\n    onAppDestroyFn(app);\n    delete APP_REGISTRY[name];\n  });\n}","map":{"version":3,"names":["APP_REGISTRY","onAppCreateFn","onAppDestroyFn","initializedNativeApps","setOnAppCreate","fn","setOnAppDestroy","initializeNativeApps","nativeModule","getAppModule","NATIVE_FIREBASE_APPS","length","i","appConfig","options","name","FirebaseApp","deleteApp","bind","getApp","DEFAULT_APP_NAME","app","Error","getApps","Object","values","initializeApp","configOrName","isObject","isNull","automaticResourceManagement","automaticDataCollectionEnabled","isUndefined","isString","Promise","reject","apiKey","appId","databaseURL","messagingSenderId","projectId","storageBucket","then","_initialized","catch","e","setLogLevel","logLevel","includes","isIOS","nativeInitialized","_deleted"],"sources":["C:/Users/sivap/OneDrive/Documents/GitHub/Seewe/node_modules/@react-native-firebase/app/lib/internal/registry/app.js"],"sourcesContent":["/*\n * Copyright (c) 2016-present Invertase Limited & Contributors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this library except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n */\n\nimport {\n  isIOS,\n  isNull,\n  isObject,\n  isString,\n  isUndefined,\n} from '@react-native-firebase/app/lib/common';\nimport FirebaseApp from '../../FirebaseApp';\nimport { DEFAULT_APP_NAME } from '../constants';\nimport { getAppModule } from './nativeModule';\n\nconst APP_REGISTRY = {};\nlet onAppCreateFn = null;\nlet onAppDestroyFn = null;\nlet initializedNativeApps = false;\n\n/**\n * This was needed to avoid metro require cycles...\n * @param fn\n */\nexport function setOnAppCreate(fn) {\n  onAppCreateFn = fn;\n}\n\n/**\n * This was needed to avoid metro require cycles...\n * @param fn\n */\nexport function setOnAppDestroy(fn) {\n  onAppDestroyFn = fn;\n}\n\n/**\n * Initializes all apps that were created natively (android/ios),\n * e.g. the Default firebase app from plist/json google services file.\n */\nexport function initializeNativeApps() {\n  const nativeModule = getAppModule();\n  const { NATIVE_FIREBASE_APPS } = nativeModule;\n\n  if (NATIVE_FIREBASE_APPS && NATIVE_FIREBASE_APPS.length) {\n    for (let i = 0; i < NATIVE_FIREBASE_APPS.length; i++) {\n      const { appConfig, options } = NATIVE_FIREBASE_APPS[i];\n      const { name } = appConfig;\n      APP_REGISTRY[name] = new FirebaseApp(\n        options,\n        appConfig,\n        true,\n        deleteApp.bind(null, name, true),\n      );\n      onAppCreateFn(APP_REGISTRY[name]);\n    }\n  }\n\n  initializedNativeApps = true;\n}\n\n/**\n * Get an app by name; or the default app.\n *\n * On first call of this method it will initialize any\n * natively created apps in JS. This makes this 'lazy load'.\n *\n * @param name\n */\nexport function getApp(name = DEFAULT_APP_NAME) {\n  if (!initializedNativeApps) {\n    initializeNativeApps();\n  }\n  const app = APP_REGISTRY[name];\n\n  if (!app) {\n    throw new Error(`No Firebase App '${name}' has been created - call firebase.initializeApp()`);\n  }\n\n  return app;\n}\n\n/**\n * Gets all app instances, used for `firebase.apps`\n */\nexport function getApps() {\n  if (!initializedNativeApps) {\n    initializeNativeApps();\n  }\n  return Object.values(APP_REGISTRY);\n}\n\n/**\n *\n * @param options\n * @param configOrName\n */\nexport function initializeApp(options = {}, configOrName) {\n  let appConfig = configOrName;\n\n  if (!isObject(configOrName) || isNull(configOrName)) {\n    appConfig = {\n      name: configOrName,\n      automaticResourceManagement: false,\n      automaticDataCollectionEnabled: true,\n    };\n  }\n\n  if (isUndefined(appConfig.name)) {\n    appConfig.name = DEFAULT_APP_NAME;\n  }\n\n  const { name } = appConfig;\n\n  if (!name || !isString(name)) {\n    return Promise.reject(new Error(`Illegal App name: '${name}'`));\n  }\n\n  if (APP_REGISTRY[name]) {\n    return Promise.reject(new Error(`Firebase App named '${name}' already exists`));\n  }\n\n  // VALIDATE OPTIONS\n  if (!isObject(options)) {\n    return Promise.reject(\n      new Error(`firebase.initializeApp(options, <- expects an Object but got '${typeof options}'`),\n    );\n  }\n\n  if (!isString(options.apiKey)) {\n    return Promise.reject(new Error(\"Missing or invalid FirebaseOptions property 'apiKey'.\"));\n  }\n\n  if (!isString(options.appId)) {\n    return Promise.reject(new Error(\"Missing or invalid FirebaseOptions property 'appId'.\"));\n  }\n\n  // TODO - make required only if database module exists - init app on native ios&android needs changing also\n  if (!isString(options.databaseURL)) {\n    return Promise.reject(new Error(\"Missing or invalid FirebaseOptions property 'databaseURL'.\"));\n  }\n\n  // TODO - make required only if messaging/notifications module exists - init app on native ios&android needs changing also\n  if (!isString(options.messagingSenderId)) {\n    return Promise.reject(\n      new Error(\"Missing or invalid FirebaseOptions property 'messagingSenderId'.\"),\n    );\n  }\n\n  if (!isString(options.projectId)) {\n    return Promise.reject(new Error(\"Missing or invalid FirebaseOptions property 'projectId'.\"));\n  }\n\n  // TODO - make required only if database module exists - init app on native ios&android needs changing also\n  if (!isString(options.storageBucket)) {\n    return Promise.reject(\n      new Error(\"Missing or invalid FirebaseOptions property 'storageBucket'.\"),\n    );\n  }\n\n  const app = new FirebaseApp(options, { name }, false, deleteApp.bind(null, name, true));\n\n  // Note these initialization actions with side effects are performed prior to knowledge of\n  // successful initialization in the native code. Native code *may* throw an error.\n  APP_REGISTRY[name] = app;\n  onAppCreateFn(APP_REGISTRY[name]);\n\n  return getAppModule()\n    .initializeApp(options, { name })\n    .then(() => {\n      app._initialized = true;\n      return app;\n    })\n    .catch(e => {\n      // we need to clean the app entry from registry as the app does not actually exist\n      // There are still possible side effects from `onAppCreateFn` to consider but as existing\n      // code may rely on that function running prior to native create, re-ordering it is a semantic change\n      // and will be avoided\n      delete APP_REGISTRY[name];\n\n      // Now allow calling code to handle the initialization issue\n      throw e;\n    });\n}\n\nexport function setLogLevel(logLevel) {\n  if (!['error', 'warn', 'info', 'debug', 'verbose'].includes(logLevel)) {\n    throw new Error('LogLevel must be one of \"error\", \"warn\", \"info\", \"debug\", \"verbose\"');\n  }\n\n  if (isIOS) {\n    getAppModule().setLogLevel(logLevel);\n  }\n}\n\n/**\n *\n */\nexport function deleteApp(name, nativeInitialized) {\n  if (name === DEFAULT_APP_NAME && nativeInitialized) {\n    return Promise.reject(new Error('Unable to delete the default native firebase app instance.'));\n  }\n\n  const app = APP_REGISTRY[name];\n\n  const nativeModule = getAppModule();\n\n  return nativeModule.deleteApp(name).then(() => {\n    app._deleted = true;\n    onAppDestroyFn(app);\n    delete APP_REGISTRY[name];\n  });\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}